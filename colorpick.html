<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, user-scalable=no" />
<title>Inch Calc — Palette Painter</title>
<style>
  :root{
    --card-max: 420px; --gap: 8px; --tile: 56px; --pad: var(--gap);
    --bg:#0e1b1b; --card:#122525; --ink:#e6f3f3; --muted:#9ababa; --ring:#6ad5b9;
  }
  *,*::before,*::after{ box-sizing:border-box }
  html,body{ height:100% }
  html, body{ margin:0; background:var(--bg); color:var(--ink); font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
  .wrap{ display:flex; justify-content:center; padding:12px; }

  .card{ width:clamp(320px,100%,var(--card-max)); display:grid; gap:var(--gap); grid-template-rows: minmax(60px,auto) 0px auto; }
  .panel{ background:var(--card); border-radius:10px; box-shadow:0 8px 24px rgba(0,0,0,.22); overflow:hidden; }
  .pad{ padding:var(--pad) }

  /* Keep a tiny tape bar just for spacing */
  .tape{ position:relative; min-height:60px; }
  .tape::after{ content:""; position:absolute; inset:0; background:linear-gradient(to bottom, rgba(255,255,0,.2), rgba(255,255,0,.35)); border:1px solid rgba(255,255,255,.08); }
  .center-line{ position:absolute; top:10%; left:50%; width:4px; height:76%; background:#e33; opacity:.6; transform:translateX(-50%); }

  /* Calculator zones */
  .io{ display:flex; flex-direction:column; gap:var(--gap); }
  .memory-grid{ display:grid; gap:var(--gap); grid-template-columns:repeat(5, 1fr); grid-template-rows:repeat(1,var(--tile)); }
  .console-grid{ display:grid; gap:var(--gap); grid-template-columns:repeat(5, 1fr); grid-template-rows:repeat(4,var(--tile)); }
  .fract-grid{ display:grid; gap:var(--gap); grid-template-columns:repeat(5, 1fr); grid-template-rows:repeat(3,var(--tile)); }
  .r1{grid-row:1}.r2{grid-row:2}.r3{grid-row:3}.r4{grid-row:4}
  .c1{grid-column:1}.c2{grid-column:2}.c3{grid-column:3}.c4{grid-column:4}.c5{grid-column:5}

  .btn{ height:100%; width:100%; border:1px solid rgba(255,255,255,.12); border-radius:8px; background:#183232; color:var(--ink); display:grid; place-items:center; font-weight:700; font-size:clamp(14px, calc(var(--tile)*.42), 20px); letter-spacing:.25px; cursor:pointer; transition:transform .05s ease, box-shadow .15s ease, background-color .2s ease, color .2s ease; }
  .btn:hover{ box-shadow:0 8px 22px rgba(0,0,0,.33) }
  .btn:active{ transform:translateY(1px) }

  /* Painter panel */
  .palette{ margin-top:12px; padding:10px; background:#0f2222; border:1px solid rgba(255,255,255,.08); border-radius:10px; display:grid; gap:10px; }
  .row{ display:flex; align-items:center; gap:8px; flex-wrap:wrap; }
  .row label{ font-size:12px; color:var(--muted); white-space:nowrap }
  .row select,.row button{ background:#0d1f1f; color:var(--ink); border:1px solid rgba(255,255,255,.14); border-radius:10px; padding:8px; font:inherit }
  .pill{ padding:6px 10px; border-radius:999px; font-size:12px }
  .spacer{ flex:1 }
  .status{ font-size:12px; color:var(--muted) }

  .group{ border:1px solid rgba(255,255,255,.08); border-radius:10px; overflow:hidden }
  .group h3{ margin:0; padding:6px 10px; font-size:12px; font-weight:600; color:#cfe; background:#0b1a1a; border-bottom:1px solid rgba(255,255,255,.06) }
  .swatch-grid{ display:grid; grid-template-columns:repeat(auto-fill,minmax(26px,1fr)); gap:6px; max-height:200px; overflow:auto; padding:8px; background:#0d1f1f; }
  .swatch{ width:100%; aspect-ratio:1/1; border-radius:6px; border:1px solid rgba(255,255,255,.35); cursor:pointer; position:relative }
  .swatch:hover::after{ content:attr(data-name); position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); font-size:10px; color:#000; background:rgba(255,255,255,.8); padding:2px 4px; border-radius:4px; }

  @media (max-width:460px){ .card{ width:100% } }
</style>
</head>
<body>
  <div class="wrap">
    <div class="card" id="card">
      <div class="panel tape"><div class="center-line"></div></div>

      <!-- Empty results area removed (height 0) -->
      <div class="panel" style="height:0; padding:0; overflow:hidden"></div>

      <div class="panel pad">
        <div class="io">
          <!-- Memory 5×1 -->
          <div class="memory-grid">
            <button class="btn mem" data-key="mc">MC</button>
            <button class="btn mem" data-key="m1">M1</button>
            <button class="btn mem" data-key="m2">M2</button>
            <button class="btn mem" data-key="m3">M3</button>
            <button class="btn mem" data-key="m4">M4</button>
          </div>

          <!-- Console 5×4 -->
          <div class="console-grid">
            <button class="btn r1 c1" data-key="back">←</button>
            <button class="btn r2 c1" data-key="clear">C</button>
            <button class="btn r3 c1" data-key="menu">menu</button>
            <button class="btn r4 c1" data-key="feet">Ft</button>

            <button class="btn r1 c2" data-key="n7">7</button>
            <button class="btn r1 c3" data-key="n8">8</button>
            <button class="btn r1 c4" data-key="n9">9</button>
            <button class="btn r2 c2" data-key="n4">4</button>
            <button class="btn r2 c3" data-key="n5">5</button>
            <button class="btn r2 c4" data-key="n6">6</button>
            <button class="btn r3 c2" data-key="n1">1</button>
            <button class="btn r3 c3" data-key="n2">2</button>
            <button class="btn r3 c4" data-key="n3">3</button>
            <button class="btn r4 c2" data-key="blank"></button>
            <button class="btn r4 c3" data-key="n0">0</button>
            <button class="btn r4 c4" data-key="dot">.</button>

            <button class="btn r1 c5" data-key="add">+</button>
            <button class="btn r2 c5" data-key="sub">−</button>
            <button class="btn r3 c5" data-key="mul">×</button>
            <button class="btn r4 c5" data-key="div">÷</button>
          </div>

          <!-- Fractions 5×3 -->
          <div class="fract-grid">
            <button class="btn" data-key="f-1-16">1/16</button>
            <button class="btn" data-key="f-1-8">1/8</button>
            <button class="btn" data-key="f-3-16">3/16</button>
            <button class="btn" data-key="f-1-4">1/4</button>
            <button class="btn" data-key="f-5-16">5/16</button>
            <button class="btn" data-key="f-3-8">3/8</button>
            <button class="btn" data-key="f-7-16">7/16</button>
            <button class="btn" data-key="f-1-2">1/2</button>
            <button class="btn" data-key="f-9-16">9/16</button>
            <button class="btn" data-key="f-5-8">5/8</button>
            <button class="btn" data-key="f-11-16">11/16</button>
            <button class="btn" data-key="f-3-4">3/4</button>
            <button class="btn" data-key="f-13-16">13/16</button>
            <button class="btn" data-key="f-7-8">7/8</button>
            <button class="btn" data-key="f-15-16">15/16</button>
          </div>
        </div>

        <!-- Painter: only what you asked for -->
        <div class="palette" id="palette">
          <div class="row">
            <button id="paintToggle" class="pill">Paint on click: ON</button>
            <div class="spacer"></div>
            <label for="target">Paint</label>
            <select id="target">
              <option value="bg" selected>Background</option>
              <option value="fg">Text</option>
            </select>
          </div>

          <div id="paletteGroups" class="palette-groups" style="display:grid; gap:10px;"></div>

          <div class="row status" id="status">Pick a swatch, then tap buttons.</div>
        </div>
      </div>
    </div>
  </div>

<script>
(function(){
  // Full list of named colors
  const NAMES = [
    "aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"
  ];

  const $ = (s, r=document) => r.querySelector(s);
  const $$ = (s, r=document) => Array.from(r.querySelectorAll(s));
  const status = $('#status');
  const state = { paint:true, target:'bg', color:null };

  // Convert a named color to HSL via computed style
  function nameToHsl(name){
    const probe = document.createElement('span');
    probe.style.color = name; document.body.appendChild(probe);
    const rgb = getComputedStyle(probe).color; probe.remove();
    const inside = rgb.slice(rgb.indexOf('(')+1, rgb.indexOf(')'));
    const parts = inside.split(',').map(s => parseInt(s.trim(),10));
    const r = (parts[0]||0)/255, g=(parts[1]||0)/255, b=(parts[2]||0)/255;
    const max=Math.max(r,g,b), min=Math.min(r,g,b), d=max-min;
    let h=0, s=0, l=(max+min)/2;
    if(d!==0){ s = d / (1 - Math.abs(2*l - 1));
      switch(max){ case r: h = 60 * (((g-b)/d) % 6); break; case g: h = 60 * (((b-r)/d) + 2); break; case b: h = 60 * (((r-g)/d) + 4); }
    }
    if(h<0) h+=360; return {h, s: s*100, l: l*100};
  }

  function bucket(name, h, s, l){
    const lowSat = s < 10; // greys
    if(/white|ivory|linen|oldlace|ghostwhite|snow|floralwhite/i.test(name)) return 'Whites';
    if(/black/i.test(name)) return 'Blacks';
    if(/gray|grey|gainsboro|silver|whitesmoke/i.test(name) || lowSat) return 'Grays';
    if(/brown|sienna|saddlebrown|chocolate|peru|tan|burlywood|rosybrown/i.test(name) || (h>15&&h<50&&l<55)) return 'Browns';
    if(h>=345||h<15) return 'Reds';
    if(h<45) return 'Oranges';
    if(h<65) return 'Yellows';
    if(h<150) return 'Greens';
    if(h<190) return 'Teals';
    if(h<255) return 'Blues';
    if(h<285) return 'Purples';
    if(h<345) return 'Pinks';
    return 'Reds';
  }

  function buildGroupedPalette(){
    const groups = { 'Reds':[], 'Oranges':[], 'Yellows':[], 'Greens':[], 'Teals':[], 'Blues':[], 'Purples':[], 'Pinks':[], 'Browns':[], 'Grays':[], 'Whites':[], 'Blacks':[] };
    NAMES.forEach(n=>{ const {h,s,l}=nameToHsl(n); const key=bucket(n,h,s,l); groups[key].push({name:n,h,s,l}); });
    Object.values(groups).forEach(arr=> arr.sort((a,b)=> a.h-b.h || b.s-a.s || b.l-a.l));

    const host = $('#paletteGroups'); host.innerHTML='';
    for(const [label, items] of Object.entries(groups)){
      if(!items.length) continue;
      const section = document.createElement('section'); section.className='group';
      const h3 = document.createElement('h3'); h3.textContent = label; section.appendChild(h3);
      const grid = document.createElement('div'); grid.className='swatch-grid';
      items.forEach(it=>{
        const sw = document.createElement('button'); sw.type='button'; sw.className='swatch'; sw.style.background = it.name; sw.title = it.name; sw.dataset.name = it.name;
        sw.addEventListener('click', ()=>{ state.color = it.name; status.textContent = `Color: ${it.name}. Now tap buttons.`; });
        grid.appendChild(sw);
      });
      section.appendChild(grid); host.appendChild(section);
    }
  }

  // Button painting
  document.addEventListener('click', (e)=>{
    const b = e.target.closest('.btn');
    if(!b) return;
    if(!state.paint) return; // only paint in paint mode
    if(!state.color){ status.textContent = 'Pick a color first.'; return; }
    if(state.target==='bg') b.style.backgroundColor = state.color; else b.style.color = state.color;
  });

  // Controls
  $('#paintToggle').addEventListener('click', ()=>{ state.paint = !state.paint; $('#paintToggle').textContent = 'Paint on click: ' + (state.paint?'ON':'OFF'); });
  $('#target').addEventListener('change', (e)=>{ state.target = e.target.value; });

  // Boot
  buildGroupedPalette();
  status.textContent = 'Pick a swatch, then tap buttons.';
})();
</script>
</body>
</html>
